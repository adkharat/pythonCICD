pipeline {

    agent any

    stages {

        stage('CleanWorkspace and Clone') {
            steps {
                cleanWs()
                echo 'Workspace cleaned /var/lib/jenkins/workspace'

                checkout scm 
                echo 'Code clone in Workspace /var/lib/jenkins/workspace'

                echo 'Python and Pip version '
                sh 'python3 --version'
                // sh 'command -v pip3 || sudo apt-get update && sudo apt-get install -y python3-pip'
                // sh 'pip3 --version'
            }
        }

        stage("python3"){
            steps{
                withPythonEnv('path_to_venv/bin'){
                    sh("python3 lambda-dunction.py") 
                }
            //    sh 'python3 lambda-dunction.py'
            }
        }

        stage("build"){
            steps{
                echo 'Generating the Gradle build in build/lib/ folder'
                sh "pwd"
                sh "ls -la"
            }
        }
    }    
}